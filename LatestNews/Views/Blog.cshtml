@inherits Umbraco.Web.Mvc.UmbracoViewPage<ContentModels.Blog>
@using ContentModels = Umbraco.Web.PublishedModels;
@{
	Layout = "master.cshtml";
}

<div class="container">

	<!-- Featured blogpost -->
	<div class="row section">
		<div class="col-md-12">
			@{
				IPublishedContent featureStory = Model.Value<IPublishedContent>("featuredStory");
				if (featureStory != null)
				{
					<a href="@featureStory.Url" class="featured-link"><div class="featured-blog">
						@{
							var featureImage = featureStory.Value<IPublishedContent>("thumbnailImage");
						}
						<div class="image-box" style="background-image:url('@featureImage.Url')"></div>
						<h2>@featureStory.Value("pageTitle")</h2>
						<p>@featureStory.Value("excerpt")</p>
						<a href="@featureStory.Url" class="btn btn-primary">Read more >></a>
					</div></a>
				}
			}
			
		</div>
	</div>

    <!-- Latest blog posts -->
	<div class="row section">
		<div class="col-md-12">
			<h3>Latest stories</h3>
		</div>
	</div>

	<!-- Blog Post Query goes here. -->
	
	
@{
	var selection = Umbraco.Content(Guid.Parse("f630f74a-cd3d-4827-834d-c0bbd5ac08b6"))
    .ChildrenOfType("blogItem")
    .Where(x => x.IsVisible());
}
<div class="row">
	@foreach (var item in selection)
		{
			var thumbnail = item.Value<IPublishedContent>("thumbnailImage");
			<div class="col-md-4">
				<a href="@item.Url" class="featured-link"><div class="thumbnail-blog">
					<div class="thumbnail-img" style="background-image:url('@thumbnail.Url')"></div>
					<h5>@item.Value("pageTitle")</h5>
				</div></a>
			</div>
		}
	</div>
	
</div>